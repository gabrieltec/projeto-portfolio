<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perssua - Assistente de ReuniÃµes</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-container">
    <!-- Barra de tÃ­tulo customizada -->
    <div class="titlebar" id="titlebar">
      <div class="titlebar-left">
        <div class="logo">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2Z" stroke="currentColor" stroke-width="1.5"/>
            <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="12" cy="12" r="2" fill="currentColor"/>
          </svg>
        </div>
        <span class="app-title">Perssua</span>
      </div>
      <div class="titlebar-controls">
        <button class="control-btn settings-btn" id="settingsBtn" title="ConfiguraÃ§Ãµes">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
        </button>
        <button class="control-btn pin-btn" id="pinBtn" title="Sempre no topo">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2v10m0 0l-4-4m4 4l4-4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/>
          </svg>
        </button>
        <button class="control-btn" id="minimizeBtn" title="Minimizar">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
        </button>
        <button class="control-btn close-btn" id="closeBtn" title="Fechar">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="6" y1="6" x2="18" y2="18"/>
            <line x1="6" y1="18" x2="18" y2="6"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- ConfiguraÃ§Ã£o inicial -->
    <div class="setup-panel" id="setupPanel">
      <div class="setup-icon">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0110 0v4"/>
        </svg>
      </div>
      <h2>Configurar API</h2>
      <p class="setup-description">Insira sua chave da OpenAI para comeÃ§ar</p>
      <div class="input-group">
        <input type="password" id="apiKeyInput" placeholder="sk-..." autocomplete="off">
        <button class="btn-primary" id="saveApiKey">
          <span>Conectar</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </button>
      </div>
      <p class="api-hint">Obtenha sua chave em <a href="#" id="openaiLink">platform.openai.com</a></p>
    </div>

    <!-- Painel principal -->
    <div class="main-panel" id="mainPanel" style="display: none;">
      <!-- Status bar -->
      <div class="status-bar">
        <div class="status-indicator" id="statusIndicator">
          <span class="status-dot"></span>
          <span class="status-text">Pronto</span>
        </div>
        <div class="profile-quick-select" id="profileQuickSelect" title="Clique para mudar perfil">
          <span class="profile-icon" id="activeProfileIcon">ğŸ¯</span>
          <span class="profile-name" id="activeProfileName">Geral</span>
        </div>
        <div class="recording-time" id="recordingTime" style="display: none;">00:00</div>
      </div>

      <!-- Seletor de Fonte de Ãudio -->
      <div class="audio-source-section">
        <div class="audio-source-header">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"/>
            <path d="M19 10v2a7 7 0 01-14 0v-2"/>
            <line x1="12" y1="19" x2="12" y2="23"/>
            <line x1="8" y1="23" x2="16" y2="23"/>
          </svg>
          <span>Fonte de Ãudio</span>
        </div>
        <div class="audio-source-options">
          <button class="audio-option active" id="optionMic" data-source="microphone" title="Apenas seu microfone">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="2" width="6" height="12" rx="3"/>
              <path d="M5 10v2a7 7 0 0014 0v-2"/>
            </svg>
            <span>Microfone</span>
          </button>
          <button class="audio-option" id="optionSystem" data-source="system" title="Ãudio do sistema (outros participantes)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="4" y="2" width="16" height="20" rx="2"/>
              <circle cx="12" cy="14" r="4"/>
              <line x1="12" y1="6" x2="12" y2="6"/>
            </svg>
            <span>Sistema</span>
          </button>
          <button class="audio-option" id="optionBoth" data-source="both" title="Microfone + Sistema (recomendado)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M8 2v12a3 3 0 006 0V2"/>
              <rect x="14" y="6" width="6" height="10" rx="1"/>
              <path d="M2 10v2a6 6 0 0012 0v-2"/>
            </svg>
            <span>Ambos</span>
          </button>
        </div>
      </div>

      <!-- Controle principal (compacto) -->
      <div class="control-section">
        <button class="record-btn" id="recordBtn">
          <div class="record-btn-inner">
            <svg class="mic-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="2" width="6" height="12" rx="3"/>
              <path d="M5 10v2a7 7 0 0014 0v-2"/>
              <line x1="12" y1="19" x2="12" y2="22"/>
            </svg>
            <div class="pulse-ring"></div>
          </div>
        </button>
        <div class="control-info">
          <p class="record-hint" id="recordHint">Clique para iniciar</p>
          <span class="recording-time-inline" id="recordingTimeInline" style="display: none;">00:00</span>
        </div>
      </div>

      <!-- V4 - Barra de Ferramentas PRÃ‰/PÃ“S ReuniÃ£o -->
      <div class="v4-toolbar">
        <button class="v4-tool-btn goal-btn" id="goalBtn" title="ğŸ¯ Definir Objetivo">
          <span class="v4-icon">ğŸ¯</span>
          <span>Objetivo</span>
        </button>
        <button class="v4-tool-btn" id="simulationBtn" title="ğŸ­ SimulaÃ§Ã£o">
          <span class="v4-icon">ğŸ­</span>
          <span>Simular</span>
        </button>
        <button class="v4-tool-btn" id="contextBtn" title="ğŸ“„ Injetar CV/JD">
          <span class="v4-icon">ğŸ“„</span>
          <span>Contexto</span>
        </button>
        <button class="v4-tool-btn" id="englishBtn" title="ğŸŒ English Assist">
          <span class="v4-icon">ğŸŒ</span>
          <span>English</span>
        </button>
        <button class="v4-tool-btn coaching-btn" id="coachingBtn" title="ğŸ“ Coaching" disabled>
          <span class="v4-icon">ğŸ“</span>
          <span>Coaching</span>
        </button>
      </div>

      <!-- V3 - Barra de Ferramentas Durante ReuniÃ£o -->
      <div class="v3-toolbar">
        <button class="v3-tool-btn" id="screenshotBtn" title="ğŸ“¸ Capturar tela + IA Visual">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2"/>
            <circle cx="8.5" cy="8.5" r="1.5"/>
            <polyline points="21 15 16 10 5 21"/>
          </svg>
          <span>Screenshot</span>
        </button>
        <button class="v3-tool-btn" id="chatBtn" title="ğŸ’¬ Chat com IA">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
          </svg>
          <span>Chat</span>
        </button>
        <button class="v3-tool-btn" id="whatToSayBtn" title="ğŸ¤ O que dizer agora?">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          <span>O que dizer?</span>
        </button>
        <button class="v3-tool-btn" id="exportBtn" title="ğŸ“„ Exportar">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          <span>Exportar</span>
        </button>
        <button class="v3-tool-btn" id="clientMemoryBtn" title="ğŸ§  MemÃ³ria de Cliente">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
        </button>
        <button class="v3-tool-btn confidential-btn" id="confidentialBtn" title="ğŸ”’ Modo Confidencial">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0110 0v4"/>
          </svg>
        </button>
      </div>

      <!-- V3 - Seletor de Persona -->
      <div class="persona-selector" id="personaSelector">
        <span class="persona-label">Persona:</span>
        <select id="personaSelect">
          <option value="">Auto</option>
          <option value="engineer">ğŸ”§ Engenheiro</option>
          <option value="salesperson">ğŸ’¼ Vendedor</option>
          <option value="pm">ğŸ“Š PM</option>
          <option value="executive">ğŸ‘” Executivo</option>
          <option value="coach">ğŸ¯ Coach</option>
        </select>
      </div>

      <!-- TranscriÃ§Ã£o -->
      <div class="transcript-section">
        <div class="section-header">
          <h3>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
            </svg>
            TranscriÃ§Ã£o
          </h3>
          <div class="section-actions">
            <button class="action-btn" id="copyAllTranscript" title="Copiar tudo">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
              </svg>
            </button>
            <button class="action-btn" id="clearTranscript" title="Limpar">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="transcript-box" id="transcriptBox">
          <p class="placeholder-text">A transcriÃ§Ã£o aparecerÃ¡ aqui...</p>
        </div>
      </div>

      <!-- SugestÃµes da IA -->
      <div class="suggestions-section">
        <div class="section-header">
          <h3>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
              <point cx="12" cy="17"/>
            </svg>
            SugestÃµes IA
          </h3>
          <div class="section-actions">
            <button class="action-btn summary-btn" id="generateSummary" title="Gerar Resumo da ReuniÃ£o">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
                <polyline points="10 9 9 9 8 9"/>
              </svg>
            </button>
            <div class="ai-badge">GPT-4o</div>
          </div>
        </div>
        <div class="suggestions-box" id="suggestionsBox">
          <div class="suggestion-placeholder">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/>
            </svg>
            <p>Inicie a sessÃ£o para receber sugestÃµes em tempo real</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Resumo -->
    <div class="summary-modal" id="summaryModal" style="display: none;">
      <div class="summary-content">
        <div class="summary-header">
          <h2>ğŸ“‹ Resumo da ReuniÃ£o</h2>
          <div class="summary-actions">
            <button class="action-btn" id="copySummary" title="Copiar Resumo">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
              </svg>
            </button>
            <button class="close-summary-btn" id="closeSummary">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="summary-body" id="summaryBody">
          <div class="summary-loading">
            <div class="loader"></div>
            <p>Gerando resumo...</p>
          </div>
        </div>
      </div>
    </div>

    <!-- V3 - Modal de Screenshot/Visual -->
    <div class="v3-modal" id="screenshotModal" style="display: none;">
      <div class="v3-modal-content">
        <div class="v3-modal-header">
          <h2>ğŸ“¸ AnÃ¡lise Visual</h2>
          <button class="close-modal-btn" id="closeScreenshotModal">Ã—</button>
        </div>
        <div class="v3-modal-body">
          <div class="screenshot-preview" id="screenshotPreview">
            <p class="placeholder-text">Clique em "Capturar" para tirar um screenshot</p>
          </div>
          <div class="screenshot-controls">
            <input type="text" id="screenshotQuestion" placeholder="Pergunta sobre a imagem (ex: Esse erro Ã© por quÃª?)">
            <div class="screenshot-buttons">
              <button class="btn-secondary" id="captureBtn">ğŸ“¸ Capturar</button>
              <button class="btn-primary" id="analyzeBtn" disabled>ğŸ” Analisar com IA</button>
            </div>
          </div>
          <div class="screenshot-result" id="screenshotResult" style="display: none;">
            <h4>ğŸ¤– AnÃ¡lise:</h4>
            <div class="analysis-text" id="analysisText"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- V3 - Modal de Chat -->
    <div class="v3-modal" id="chatModal" style="display: none;">
      <div class="v3-modal-content chat-modal">
        <div class="v3-modal-header">
          <h2>ğŸ’¬ Chat com IA</h2>
          <button class="close-modal-btn" id="closeChatModal">Ã—</button>
        </div>
        <div class="v3-modal-body">
          <div class="chat-messages" id="chatMessages">
            <div class="chat-hint">
              <p>ğŸ’¡ Digite para conversar com a IA sem interromper a reuniÃ£o.</p>
              <p>A IA considera o contexto da conversa atual.</p>
            </div>
          </div>
          <div class="chat-input-area">
            <input type="text" id="chatInput" placeholder="Digite sua mensagem...">
            <button class="btn-primary" id="sendChatBtn">Enviar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- V3 - Modal "O que dizer?" -->
    <div class="v3-modal" id="whatToSayModal" style="display: none;">
      <div class="v3-modal-content">
        <div class="v3-modal-header">
          <h2>ğŸ¤ O que dizer agora?</h2>
          <button class="close-modal-btn" id="closeWhatToSayModal">Ã—</button>
        </div>
        <div class="v3-modal-body">
          <div class="situation-selector">
            <p>Qual Ã© a situaÃ§Ã£o?</p>
            <div class="situation-buttons">
              <button class="situation-btn" data-situation="silence">ğŸ˜¶ SilÃªncio</button>
              <button class="situation-btn" data-situation="questioned">â“ Fui questionado</button>
              <button class="situation-btn" data-situation="stuck">ğŸ”„ ReuniÃ£o travou</button>
              <button class="situation-btn" data-situation="objection">ğŸš¨ ObjeÃ§Ã£o</button>
              <button class="situation-btn" data-situation="closing">âœ… Fechamento</button>
            </div>
          </div>
          <div class="what-to-say-result" id="whatToSayResult" style="display: none;">
            <div class="suggestion-text" id="whatToSayText"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- V3 - Modal de ExportaÃ§Ã£o -->
    <div class="v3-modal" id="exportModal" style="display: none;">
      <div class="v3-modal-content">
        <div class="v3-modal-header">
          <h2>ğŸ“„ Exportar ReuniÃ£o</h2>
          <button class="close-modal-btn" id="closeExportModal">Ã—</button>
        </div>
        <div class="v3-modal-body">
          <div class="export-options">
            <button class="export-option" data-format="markdown">
              <span class="export-icon">ğŸ“</span>
              <span class="export-label">Markdown</span>
              <span class="export-desc">TÃ©cnico / Dev / Wiki</span>
            </button>
            <button class="export-option" data-format="pdf">
              <span class="export-icon">ğŸ“„</span>
              <span class="export-label">PDF/HTML</span>
              <span class="export-desc">Executivo / Cliente</span>
            </button>
          </div>
          <div class="export-preview" id="exportPreview" style="display: none;">
            <h4>PrÃ©via:</h4>
            <textarea id="exportContent" rows="10"></textarea>
            <button class="btn-primary" id="downloadExport">â¬‡ï¸ Baixar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- V3 - Modal de MemÃ³ria de Cliente -->
    <div class="v3-modal" id="clientMemoryModal" style="display: none;">
      <div class="v3-modal-content">
        <div class="v3-modal-header">
          <h2>ğŸ§  MemÃ³ria de Cliente</h2>
          <button class="close-modal-btn" id="closeClientMemoryModal">Ã—</button>
        </div>
        <div class="v3-modal-body">
          <div class="client-selector">
            <input type="text" id="clientName" placeholder="Nome do cliente/projeto">
            <button class="btn-secondary" id="loadClientMemory">Carregar</button>
            <button class="btn-primary" id="newClientMemory">+ Novo</button>
          </div>
          <div class="client-notes" id="clientNotes" style="display: none;">
            <h4>ğŸ“ Notas sobre este cliente:</h4>
            <div class="notes-list" id="notesList"></div>
            <div class="add-note">
              <input type="text" id="newNote" placeholder="Adicionar nota...">
              <button class="btn-primary" id="addNoteBtn">+</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- V4 - Modal de Objetivo da ReuniÃ£o -->
    <div class="v3-modal" id="goalModal" style="display: none;">
      <div class="v3-modal-content v4-modal-large">
        <div class="v3-modal-header v4-header">
          <h2>ğŸ¯ Definir Objetivo da ReuniÃ£o</h2>
          <button class="close-modal-btn" id="closeGoalModal">Ã—</button>
        </div>
        <div class="v3-modal-body">
          <div class="v4-form">
            <div class="v4-form-group">
              <label>ğŸ¯ Objetivo Principal</label>
              <input type="text" id="goalMain" placeholder="Ex: Fechar contrato, Alinhar arquitetura, Passar na entrevista">
            </div>
            <div class="v4-form-group">
              <label>âœ… Resultado Desejado</label>
              <input type="text" id="goalOutcome" placeholder="Ex: Assinatura do contrato, AprovaÃ§Ã£o do design">
            </div>
            <div class="v4-form-group">
              <label>âŒ O que NÃƒO pode acontecer</label>
              <input type="text" id="goalAvoid" placeholder="Ex: Perder para concorrente, Parecer despreparado">
            </div>
            <div class="v4-form-group">
              <label>ğŸ‘¤ Tipo de Interlocutor</label>
              <select id="goalInterlocutor">
                <option value="technical">ğŸ”§ TÃ©cnico</option>
                <option value="manager">ğŸ‘” Gestor/Gerente</option>
                <option value="hr">ğŸ§‘â€ğŸ’¼ RH</option>
                <option value="clevel">ğŸ‘‘ C-Level</option>
                <option value="client">ğŸ’¼ Cliente</option>
              </select>
            </div>
            <button class="btn-primary v4-btn-full" id="saveGoalBtn">ğŸ¯ Salvar e Monitorar</button>
          </div>
          <div class="v4-goal-status" id="goalStatus" style="display: none;">
            <h4>ğŸ“Š Status do Objetivo</h4>
            <div class="goal-progress">
              <div class="goal-progress-bar" id="goalProgressBar" style="width: 0%"></div>
            </div>
            <p class="goal-percent" id="goalPercent">0%</p>
            <div class="goal-alert" id="goalAlert" style="display: none;"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- V4 - Modal de SimulaÃ§Ã£o -->
    <div class="v3-modal" id="simulationModal" style="display: none;">
      <div class="v3-modal-content v4-modal-large">
        <div class="v3-modal-header v4-header">
          <h2>ğŸ­ SimulaÃ§Ã£o de ReuniÃ£o</h2>
          <button class="close-modal-btn" id="closeSimulationModal">Ã—</button>
        </div>
        <div class="v3-modal-body">
          <!-- Setup da SimulaÃ§Ã£o -->
          <div class="simulation-setup" id="simulationSetup">
            <div class="v4-form-group">
              <label>ğŸ“‹ Tipo de SimulaÃ§Ã£o</label>
              <select id="simType">
                <option value="technical_interview">ğŸ’» Entrevista TÃ©cnica</option>
                <option value="behavioral_interview">ğŸ§  Entrevista Comportamental</option>
                <option value="sales">ğŸ’¼ Venda/ApresentaÃ§Ã£o</option>
                <option value="negotiation">ğŸ¤ NegociaÃ§Ã£o</option>
                <option value="presentation">ğŸ“Š Pitch/ApresentaÃ§Ã£o</option>
              </select>
            </div>
            <div class="v4-form-group">
              <label>âš¡ Dificuldade</label>
              <div class="difficulty-selector">
                <button class="diff-btn" data-diff="junior">ğŸŸ¢ Junior</button>
                <button class="diff-btn active" data-diff="senior">ğŸŸ¡ SÃªnior</button>
                <button class="diff-btn" data-diff="hostile">ğŸ”´ Hostil</button>
                <button class="diff-btn" data-diff="pressuring">âš¡ Pressionador</button>
              </div>
            </div>
            <div class="v4-form-group">
              <label>ğŸ“ Contexto Adicional (opcional)</label>
              <textarea id="simContext" rows="3" placeholder="Ex: Vaga de Senior Dev na empresa X, produto SaaS B2B..."></textarea>
            </div>
            <button class="btn-primary v4-btn-full" id="startSimBtn">ğŸ¬ Iniciar SimulaÃ§Ã£o</button>
          </div>
          
          <!-- Chat da SimulaÃ§Ã£o -->
          <div class="simulation-chat" id="simulationChat" style="display: none;">
            <div class="sim-messages" id="simMessages"></div>
            <div class="sim-feedback" id="simFeedback" style="display: none;">
              <span class="feedback-score" id="feedbackScore"></span>
              <span class="feedback-text" id="feedbackText"></span>
            </div>
            <div class="sim-input-area">
              <input type="text" id="simInput" placeholder="Sua resposta...">
              <button class="btn-primary" id="sendSimBtn">Enviar</button>
            </div>
            <button class="btn-secondary v4-btn-full" id="endSimBtn">ğŸ Encerrar e Ver Resultado</button>
          </div>
        </div>
      </div>
    </div>

    <!-- V4 - Modal de Contexto (CV/JD) -->
    <div class="v3-modal" id="contextModal" style="display: none;">
      <div class="v3-modal-content v4-modal-large">
        <div class="v3-modal-header v4-header">
          <h2>ğŸ“„ Injetar Contexto</h2>
          <button class="close-modal-btn" id="closeContextModal">Ã—</button>
        </div>
        <div class="v3-modal-body">
          <p class="v4-hint">A IA usarÃ¡ essas informaÃ§Ãµes como fonte de verdade para suas respostas.</p>
          <div class="context-tabs">
            <button class="context-tab active" data-ctx="cv">ğŸ“„ CurrÃ­culo</button>
            <button class="context-tab" data-ctx="jd">ğŸ“‹ Vaga (JD)</button>
            <button class="context-tab" data-ctx="company">ğŸ¢ Empresa</button>
            <button class="context-tab" data-ctx="interviewer">ğŸ‘¤ Entrevistador</button>
          </div>
          <div class="context-content">
            <textarea id="contextText" rows="10" placeholder="Cole o conteÃºdo aqui..."></textarea>
          </div>
          <div class="context-actions">
            <button class="btn-secondary" id="clearContextBtn">ğŸ—‘ï¸ Limpar Tudo</button>
            <button class="btn-primary" id="saveContextBtn">ğŸ’¾ Salvar Contexto</button>
          </div>
          <div class="context-status" id="contextStatus">
            <span class="ctx-badge" id="cvBadge" style="display:none;">ğŸ“„ CV</span>
            <span class="ctx-badge" id="jdBadge" style="display:none;">ğŸ“‹ JD</span>
            <span class="ctx-badge" id="companyBadge" style="display:none;">ğŸ¢ Empresa</span>
            <span class="ctx-badge" id="interviewerBadge" style="display:none;">ğŸ‘¤ Entrevistador</span>
          </div>
        </div>
      </div>
    </div>

    <!-- V4 - Modal English Assist -->
    <div class="v3-modal" id="englishModal" style="display: none;">
      <div class="v3-modal-content">
        <div class="v3-modal-header v4-header">
          <h2>ğŸŒ English Assist</h2>
          <button class="close-modal-btn" id="closeEnglishModal">Ã—</button>
        </div>
        <div class="v3-modal-body">
          <div class="english-tabs">
            <button class="english-tab active" data-mode="translate">ğŸ”„ Traduzir</button>
            <button class="english-tab" data-mode="speak">ğŸ¤ Speak For Me</button>
          </div>
          
          <!-- Modo Traduzir -->
          <div class="english-content" id="translateContent">
            <div class="v4-form-group">
              <label>ğŸ“ O que vocÃª quer dizer (em portuguÃªs)</label>
              <textarea id="translateInput" rows="3" placeholder="Digite em portuguÃªs..."></textarea>
            </div>
            <div class="translate-mode-selector">
              <button class="trans-mode-btn" data-mode="literal">ğŸ“– Literal</button>
              <button class="trans-mode-btn active" data-mode="professional">ğŸ’¼ Profissional</button>
              <button class="trans-mode-btn" data-mode="strategic">ğŸ¯ EstratÃ©gico</button>
            </div>
            <button class="btn-primary v4-btn-full" id="translateBtn">ğŸ”„ Traduzir</button>
            <div class="translate-result" id="translateResult" style="display: none;">
              <div class="main-translation" id="mainTranslation"></div>
              <div class="translation-extras" id="translationExtras"></div>
            </div>
          </div>
          
          <!-- Modo Speak For Me -->
          <div class="english-content" id="speakContent" style="display: none;">
            <div class="v4-form-group">
              <label>ğŸ’­ O que vocÃª quer expressar</label>
              <textarea id="speakIntent" rows="2" placeholder="Ex: Quero dizer que tenho 5 anos de experiÃªncia com React..."></textarea>
            </div>
            <div class="v4-form-group">
              <label>ğŸ“ Contexto</label>
              <select id="speakContext">
                <option value="interview">ğŸ¤ Entrevista</option>
                <option value="meeting">ğŸ’¼ ReuniÃ£o</option>
                <option value="presentation">ğŸ“Š ApresentaÃ§Ã£o</option>
                <option value="negotiation">ğŸ¤ NegociaÃ§Ã£o</option>
              </select>
            </div>
            <button class="btn-primary v4-btn-full" id="speakBtn">ğŸ¤ Gerar Frases</button>
            <div class="speak-result" id="speakResult" style="display: none;"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- V4 - Modal Coaching -->
    <div class="v3-modal" id="coachingModal" style="display: none;">
      <div class="v3-modal-content v4-modal-large">
        <div class="v3-modal-header v4-header">
          <h2>ğŸ“ Coaching Report</h2>
          <button class="close-modal-btn" id="closeCoachingModal">Ã—</button>
        </div>
        <div class="v3-modal-body">
          <div class="coaching-loading" id="coachingLoading">
            <div class="loader"></div>
            <p>Analisando sua performance...</p>
          </div>
          <div class="coaching-report" id="coachingReport" style="display: none;">
            <div class="coaching-score-circle" id="coachingScore">
              <span class="score-number">0</span>
              <span class="score-label">Score</span>
            </div>
            <div class="coaching-categories" id="coachingCategories"></div>
            <div class="coaching-strengths" id="coachingStrengths"></div>
            <div class="coaching-improve" id="coachingImprove"></div>
            <div class="coaching-exercise" id="coachingExercise"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
      <div class="loader"></div>
      <p>Processando...</p>
    </div>

    <!-- Painel de ConfiguraÃ§Ãµes -->
    <div class="settings-panel" id="settingsPanel" style="display: none;">
      <div class="settings-header">
        <h2>âš™ï¸ ConfiguraÃ§Ãµes</h2>
        <button class="close-settings-btn" id="closeSettings">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      
      <!-- Tabs -->
      <div class="settings-tabs">
        <button class="tab-btn active" data-tab="general">Geral</button>
        <button class="tab-btn" data-tab="profiles">Perfis</button>
        <button class="tab-btn" data-tab="history">HistÃ³rico</button>
        <button class="tab-btn" data-tab="shortcuts">Atalhos</button>
      </div>
      
      <!-- Tab: Geral -->
      <div class="tab-content active" id="tab-general">
        <div class="setting-group">
          <label>ğŸ”‘ Chave API OpenAI</label>
          <input type="password" id="settingsApiKey" placeholder="sk-...">
        </div>
        
        <div class="setting-row">
          <div class="setting-group half">
            <label>ğŸ¤ Idioma de Entrada</label>
            <select id="settingsInputLang">
              <option value="pt">PortuguÃªs</option>
              <option value="en">English</option>
              <option value="es">EspaÃ±ol</option>
            </select>
          </div>
          <div class="setting-group half">
            <label>ğŸ’¬ Idioma de SaÃ­da</label>
            <select id="settingsOutputLang">
              <option value="pt">PortuguÃªs</option>
              <option value="en">English</option>
              <option value="es">EspaÃ±ol</option>
            </select>
          </div>
        </div>
        
        <div class="setting-group">
          <label>ğŸ¤– Modelo GPT</label>
          <select id="settingsModel">
            <option value="gpt-4o-mini">GPT-4o Mini (RÃ¡pido)</option>
            <option value="gpt-4o">GPT-4o (AvanÃ§ado)</option>
            <option value="gpt-4-turbo">GPT-4 Turbo</option>
            <option value="gpt-3.5-turbo">GPT-3.5 Turbo (EconÃ´mico)</option>
          </select>
        </div>
        
        <div class="setting-group">
          <label>ğŸ¯ Modo de AssistÃªncia</label>
          <select id="settingsMode">
            <option value="general">Geral</option>
            <option value="sales">Vendas</option>
            <option value="technical">TÃ©cnico</option>
            <option value="interview">Entrevista</option>
          </select>
        </div>
        
        <div class="setting-group toggle-group">
          <label>âš¡ SugestÃ£o AutomÃ¡tica</label>
          <button class="toggle-btn" id="toggleAutoSuggestion">
            <span class="toggle-slider"></span>
          </button>
        </div>
      </div>
      
      <!-- Tab: Perfis (v2.0) -->
      <div class="tab-content" id="tab-profiles">
        <p class="shortcuts-info">Escolha um perfil otimizado para seu tipo de reuniÃ£o.</p>
        
        <div class="detected-apps" id="detectedApps" style="display: none;">
          <span class="detected-label">ğŸ” Apps detectados:</span>
          <div class="apps-list" id="appsList"></div>
        </div>
        
        <div class="profiles-grid" id="profilesGrid">
          <!-- Perfis serÃ£o carregados via JS -->
        </div>
        
        <button class="btn-secondary create-profile-btn" id="createProfileBtn">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
          Criar Perfil Personalizado
        </button>
      </div>
      
      <!-- Tab: HistÃ³rico (v2.0) -->
      <div class="tab-content" id="tab-history">
        <div class="history-header">
          <p class="shortcuts-info">Suas reuniÃµes recentes</p>
          <div class="feedback-stats" id="feedbackStats">
            <span class="stat-label">Taxa de utilidade:</span>
            <span class="stat-value" id="feedbackRate">--</span>
          </div>
        </div>
        
        <div class="history-list" id="historyList">
          <p class="empty-history">Nenhuma reuniÃ£o gravada ainda</p>
        </div>
      </div>
      
      <!-- Tab: Atalhos -->
      <div class="tab-content" id="tab-shortcuts">
        <p class="shortcuts-info">Use os atalhos para controlar o app sem tirar as mÃ£os do teclado.</p>
        
        <div class="shortcut-item">
          <span class="shortcut-label">â–¶ï¸ Ativar/Pausar</span>
          <span class="shortcut-key">Ctrl+Shift+1</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-label">ğŸ”‡ Mutar SugestÃµes</span>
          <span class="shortcut-key">Ctrl+Shift+2</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-label">ğŸ“Œ Fixar Overlay</span>
          <span class="shortcut-key">Ctrl+Shift+3</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-label">ğŸ—‘ï¸ Limpar Contexto</span>
          <span class="shortcut-key">Ctrl+Shift+4</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-label">â¹ï¸ Encerrar SessÃ£o</span>
          <span class="shortcut-key">Ctrl+Shift+5</span>
        </div>
      </div>
      
      <div class="settings-footer">
        <button class="btn-secondary" id="cancelSettings">Cancelar</button>
        <button class="btn-primary" id="saveSettingsBtn">Salvar</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
